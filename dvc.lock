schema: '2.0'
stages:
  preview:
    cmd: python3 src/preview.py
    deps:
    - path: data/prepared
      hash: md5
      md5: 04dd6fc88c379a948dcc0f7d2b09c9a7.dir
      size: 111703891
      nfiles: 1714
    - path: src/preview.py
      hash: md5
      md5: 4ab1fc04f76ae42747836709553d8894
      size: 1772
    params:
      params.yaml:
        datamodule.batch_size: 16
        datamodule.data_root: data/prepared
        datamodule.image_size: 256
        datamodule.seed: 42
        datamodule.split: 0.8
    outs:
    - path: data/preview
      hash: md5
      md5: e5586c29afa5a899b79193ce1c1ae6ce.dir
      size: 1153721
      nfiles: 10
  train:
    cmd: python3 src/train.py
    deps:
    - path: data/preview
      hash: md5
      md5: e5586c29afa5a899b79193ce1c1ae6ce.dir
      size: 1153721
      nfiles: 10
    - path: data/raw
      hash: md5
      md5: 2cbcd546cdfae22d6070e2e1e76bf050.dir
      size: 214964820
      nfiles: 5
    - path: src/train.py
      hash: md5
      md5: 63d7265cb05c48b0ecaa298845220e75
      size: 3532
    params:
      params.yaml:
        datamodule:
          seed: 42
          data_root: data/prepared
          split: 0.8
          batch_size: 16
          image_size: 256
          num_workers: 4
          pin_memory: true
        train:
          seed: 42
          num_classes: 2
          lr: 0.005
          lr_momentum: 0.9
          lr_decay_rate: 0.0005
          lr_sched_step_size: 0.1
          lr_sched_gamma: 0.1
          save_ckpt: false
          es_patience:
          epochs: 15
          precision: 16-mixed
          accumulate_grad_batches:
    outs:
    - path: lightning_logs
      hash: md5
      md5: 8d057332976cf45267de68e4ea8bb7ff.dir
      size: 1386047934
      nfiles: 8
    - path: out/model.ckpt
      hash: md5
      md5: ab62f0089ec3cf41a38dfe556ee4dc6a
      size: 346489062
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: out/model.ckpt
      hash: md5
      md5: ab62f0089ec3cf41a38dfe556ee4dc6a
      size: 346489062
    - path: src/evaluate.py
      hash: md5
      md5: f047f94aeaf0c083cab5a56305085216
      size: 2467
    params:
      params.yaml:
        datamodule.batch_size: 16
        datamodule.data_root: data/prepared
        datamodule.image_size: 256
        datamodule.seed: 42
        datamodule.split: 0.8
        train:
          seed: 42
          num_classes: 2
          lr: 0.005
          lr_momentum: 0.9
          lr_decay_rate: 0.0005
          lr_sched_step_size: 0.1
          lr_sched_gamma: 0.1
          save_ckpt: false
          es_patience:
          epochs: 15
          precision: 16-mixed
          accumulate_grad_batches:
    outs:
    - path: data/evaluate
      hash: md5
      md5: a0ca375451551dfc7e04d0d022f05e6e.dir
      size: 1137085
      nfiles: 10
  prepare:
    cmd: python3 src/prepare.py
    deps:
    - path: data/raw
      hash: md5
      md5: 2cbcd546cdfae22d6070e2e1e76bf050.dir
      size: 214964820
      nfiles: 5
    - path: src/prepare.py
      hash: md5
      md5: 7dcc5b17b9ae0c9b67eb3ef2b7cc4a6d
      size: 3183
    params:
      params.yaml:
        datamodule.data_root: data/prepared
    outs:
    - path: data/prepared
      hash: md5
      md5: 04dd6fc88c379a948dcc0f7d2b09c9a7.dir
      size: 111703891
      nfiles: 1714
